var Index=function(){var csrf_token=$('meta[name="csrf_token"]').attr("content"),table,aSelected=[];const nameOfModule="sample-cs";var handleDataTable=function(){table=$("#tbl-sample-cs").DataTable({responsive:!0,autoWidth:!0,dom:"Bfrtip",buttons:["pageLength","csv","excel","pdf","print"],searching:!0,paging:!0,lengthMenu:[[15,25,50],[15,25,50]],language:{info:"Show _START_ - _END_ from _TOTAL_ data",infoEmpty:"Show 0 - 0 from 0 data",infoFiltered:"",zeroRecords:"Data not found",loadingRecords:"Loading...",processing:"Processing..."},columnsDefs:[{searchable:!1,target:[0,1]},{orderable:!1,target:0}],processing:!0,serverSide:!0,ajax:{url:url+"/cs/sample-request/list",type:"POST",data:function(d){d._token=csrf_token,d.sample_status=$("#status-sample").val()}},columns:[{data:"rnum",orderable:!1},{data:"id",orderable:!1},{data:"subject",orderable:!1},{data:"request",orderable:!1},{data:"delivery",orderable:!1},{data:"delivery_by",orderable:!1},{data:"pic",orderable:!1},{data:"creator",orderable:!1},{data:"cs",orderable:!1},{data:"status",orderable:!1},{data:"action",orderable:!1}],drawCallback:function(settings){}}),$("#btnRefresh").click((function(e){e.preventDefault(),table.ajax.reload()})),$("#btn-reload").click((function(e){e.preventDefault(),window.location.reload()})),$("#status-sample").change((function(e){e.preventDefault(),table.ajax.reload()})),handleAddReceipt()},handleDeliveryInformation=function(){$(document).on("click",".btn-info-delivery",(function(e){e.preventDefault();const deliveryValue=$(this).data("di");$.ajax({url:`${url}/cs/sample-request/delivery-information`,type:"POST",data:{_token:csrf_token,dl:deliveryValue},success:function(responses){var responseData=responses.data;$("#delivery-name-info").val(responseData.delivery_name),$("#receipt-info").val(responseData.receipt)},error:function(response){toastr.error("error, please try again")}})}))},handleAddReceipt=function(){$(document).on("click",".btn-add-receipt",(function(e){e.preventDefault();const diValue=$(this).data("di");$("#form-add-receipt").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);formData.append("di",diValue),$.ajax({url:url+"/cs/sample-request/receipt",type:"POST",data:formData,processData:!1,contentType:!1,success:function(responses){toastr.success(responses.message),setTimeout(()=>{window.location.reload()},2500)},error:function(response){$.each(response.responseJSON,(function(key,value){toastr.error(value)}))}})}))}))};return{init:function(){handleDataTable(),handleDeliveryInformation()}}}();$(document).ready((function(){Index.init()}));