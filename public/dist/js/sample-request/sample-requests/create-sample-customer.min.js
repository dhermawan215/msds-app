var Index=function(){var csrf_token=$('meta[name="csrf_token"]').attr("content");const moduleName="sample-customer";var handleAdd=function(){$("#form-add-"+moduleName).submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("Are you sure?")&&$.ajax({url:`${url}/sample-request/customer-detail/save`,type:"POST",data:formData,processData:!1,contentType:!1,success:function(responses){toastr.success(responses.message),setTimeout(()=>{window.location.href=responses.url},3500)},error:function(response){$.each(response.responseJSON,(function(key,value){toastr.error(value)}))}})}))},handleCustomerDropdown=function(){$("#customer").select2({allowClear:!0,placeholder:"Select customer",dataType:"json",ajax:{method:"POST",url:url+"/sample-request/customer",data:function(params){return{_token:csrf_token,search:params.term,page:params.page||1}},processResults:function(data,params){return params.page=params.page||1,{results:data.items,pagination:{more:!0}}}},templateResult:format,templateSelection:formatSelection})};function format(repo){if(repo.loading)return repo.text;var $container=$("<div class='select2-result-repository clearfix'><div class='select2-result-repository__title'></div></div>");return $container.find(".select2-result-repository__title").text(repo.text),$container}function formatSelection(repo){return repo.text}var handleDropdownAddressPic=function(){$("#customer").change((function(e){e.preventDefault();const valueOfCustomer=$(this).val();$.ajax({type:"POST",url:url+"/sample-request/customer-detail",data:{_token:csrf_token,customer:valueOfCustomer},dataType:"json",success:function(response){var items=response.items,customerPic=items.pic,customerAddress=items.address;$("#customer-pic").val(null).empty().trigger("change"),$("#customer-address").val(null).empty().trigger("change"),$("#customer-pic").select2({data:customerPic}),$("#customer-address").select2({data:customerAddress})}})}))};return{init:function(){handleAdd(),handleCustomerDropdown(),handleDropdownAddressPic()}}}();$(document).ready((function(){Index.init()}));