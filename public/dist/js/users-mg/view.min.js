var Index=function(){const csrf_token=$('meta[name="csrf_token"]').attr("content");var table,handleDataTabelUser=function(){table=$("#tblAdminUserMg").DataTable({responsive:!0,autoWidth:!0,pageLength:15,searching:!0,paging:!0,lengthMenu:[[15,25,50],[15,25,50]],language:{info:"Menampilkan _START_ - _END_ dari _TOTAL_ data",infoEmpty:"Menampilkan 0 - 0 dari 0 data",infoFiltered:"",zeroRecords:"Data tidak di temukan",loadingRecords:"Loading...",processing:"Processing..."},columnsDefs:[{searchable:!1,target:[0,1]},{orderable:!1,target:0}],processing:!0,serverSide:!0,ajax:{url:url+"/users-management",type:"POST",data:{_token:csrf_token}},columns:[{data:"rnum",orderable:!1},{data:"name",orderable:!1},{data:"email",orderable:!1},{data:"roles",orderable:!1},{data:"status",orderable:!1},{data:"action",orderable:!1}]}),$("#btnRefresh").click((function(e){e.preventDefault(),table.ajax.reload()})),-1!==$.inArray("add",ModuleFn)?$("#btnRegUser").removeAttr("disabled"):$("#btnRegUser").attr("disabled","disabled")},handleRegistration=function(){$("#formUserRegister").submit((function(e){e.preventDefault();const form=$(this);let formData=new FormData(form[0]);confirm("is right?")&&$.ajax({url:url+"/users-management/user-registration",type:"POST",data:formData,processData:!1,contentType:!1,success:function(responses){toastr.success("success!"),setTimeout(()=>{$("#modal-userReg").modal("toggle"),table.ajax.reload()},4500)},error:function(response){$.each(response.responseJSON,(function(key,value){toastr.error(value)}))}})}))},handleUserActive=function(){$(document).on("change",".activeuser",(function(){if($(this).is(":checked")){const cbxVal=$(this).data("toggle"),activeVal="1";$.ajax({type:"POST",url:`${url}/users-management/user-active`,data:{_token:csrf_token,cbxValue:cbxVal,acValue:activeVal},success:function(response){toastr.success(response.data)}})}else{const cbxVal=$(this).data("toggle"),activeVal="0";$.ajax({type:"POST",url:`${url}/users-management/user-active`,data:{_token:csrf_token,cbxValue:cbxVal,acValue:activeVal},success:function(response){toastr.success(response.data)}})}}))};return{init:function(){handleDataTabelUser(),handleRegistration(),handleUserActive()}}}();$(document).ready((function(){Index.init()}));